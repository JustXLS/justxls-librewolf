#make the damn thing compile with cairo-gtk2 and system cairo/glitz

--- gfx/thebes/src/Makefile.in.orig	2007-04-27 05:51:49.000000000 +0200
+++ gfx/thebes/src/Makefile.in	2007-04-27 05:57:04.000000000 +0200
@@ -12,8 +12,6 @@
 EXPORT_LIBRARY	= 1
 
 REQUIRES = \
-	cairo \
-	libpixman \
 	string \
 	pref \
 	xpcom \
@@ -113,10 +114,13 @@
 endif
 
 ifdef MOZ_ENABLE_GLITZ
-REQUIRES += 	glitz
 CPPSRCS +=	gfxGlitzSurface.cpp
 
+
+ifneq ($(MOZ_WIDGET_TOOLKIT),gtk2)
+REQUIRES += 	glitz
 SHARED_LIBRARY_LIBS += $(DIST)/lib/$(LIB_PREFIX)mozglitz.$(LIB_SUFFIX)
+endif
 
 ifeq ($(MOZ_WIDGET_TOOLKIT),windows)
 REQUIRES +=	glitzwgl
@@ -124,11 +128,6 @@
 OS_LIBS += opengl32.lib 
 endif
 
-ifeq ($(MOZ_WIDGET_TOOLKIT),gtk2)
-REQUIRES +=	glitzglx
-SHARED_LIBRARY_LIBS += $(DIST)/lib/$(LIB_PREFIX)mozglitzglx.$(LIB_SUFFIX)
-endif
-
 ifneq (,$(filter $(MOZ_WIDGET_TOOLKIT),mac cocoa))
 REQUIRES +=	glitzagl
 SHARED_LIBRARY_LIBS += $(DIST)/lib/$(LIB_PREFIX)mozglitzagl.$(LIB_SUFFIX)
--- configure.in.orig	2007-04-27 06:24:26.000000000 +0200
+++ configure.in	2007-04-27 06:24:04.000000000 +0200
@@ -7280,9 +7280,13 @@
            fi
        fi
    else
-      PKG_CHECK_MODULES(CAIRO, cairo >= $CAIRO_VERSION freetype2 fontconfig)
+      if test "$MOZ_ENABLE_GLITZ"; then
+          PKG_CHECK_MODULES(CAIRO, cairo >= $CAIRO_VERSION glitz-glx glitz freetype2 fontconfig)
+      else
+          PKG_CHECK_MODULES(CAIRO, cairo >= $CAIRO_VERSION freetype2 fontconfig)
+      fi
       MOZ_CAIRO_CFLAGS=$CAIRO_CFLAGS
-      MOZ_CAIRO_LIBS=$CAIRO_LIBS
+      MOZ_CAIRO_LIBS=$CAIRO_LIBS 
    fi
 fi
 
--- widget/src/gtk2/Makefile.in.orig	2007-06-18 00:29:12.000000000 +0200
+++ widget/src/gtk2/Makefile.in	2007-06-18 00:30:04.000000000 +0200
@@ -129,6 +129,7 @@
 		$(XLIBS) \
 		$(MOZ_GTK2_LIBS) \
 		-lthebes \
+		$(MOZ_CAIRO_LIBS) \
 		$(LCMS_LIBS) \
 		$(NULL)
 
--- config/system-headers.orig	2007-07-22 17:28:01.000000000 +0200
+++ config/system-headers	2007-07-22 17:29:21.000000000 +0200
@@ -85,6 +85,8 @@
 cairo-win32.h
 cairo-xlib.h
 cairo-xlib-xrender.h
+glitz.h
+glitz-glx.h
 #endif
 callconv.h
 Carbon/Carbon.h
